# Composite 
## Intent
**Composite** λ” κ°μ²΄λ¥Ό νΈλ¦¬ κµ¬μ΅°λ΅ κµ¬μ„±ν• λ‹¤μ μ΄λ° κµ¬μ΅°λ¥Ό κ°λ³„ κ°μ²΄μΈ κ²ƒμ²λΌ μ‘μ—…ν•  μ μλ” κµ¬μ΅°μ  λ””μμΈ ν¨ν„΄μ΄λ‹¤.

## Problem
μ•±μ ν•µμ‹¬ λ¨λΈμ΄ νΈλ¦¬ κµ¬μ΅°λ΅ ν‘ν„κ°€λ¥ν•  λ•μ—λ§ Composite ν¨ν„΄μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μλ―Έκ°€ μλ‹¤.

μλ¥Ό λ“¤μ–΄, `μƒν’`κ³Ό `μƒμ`λΌλ” λ‘ νƒ€μ…μ κ°μ²΄κ°€ μλ‹¤κ³  κ°€μ •ν•λ‹¤. `μƒμ` μ—λ” μ—¬λ¬ `μƒν’`λ“¤μ΄ ν¬ν•¨λ  μ μκ³ , λ³΄λ‹¤ μ‘μ€ μ—¬λ¬ `μƒμ`λ“¤ μ—­μ‹ ν¬ν•¨λ  μ μλ‹¤. ν•΄λ‹Ήν•λ” μ‘μ€ `μƒμ`λ“¤ μ—­μ‹, μ—¬λ¬ `μƒν’`λ“¤κ³Ό κ·Έλ³΄λ‹¤ μ‘μ€ μ—¬λ¬ `μƒμ`κ°€ ν¬ν•¨λ  μ μλ‹¤.

μ΄λ¬ν• ν΄λμ¤λ“¤μ„ μ‚¬μ©ν•΄μ„ μ£Όλ¬Έμ‹μ¤ν…μ„ λ§λ“¤κΈ°λ΅ κ²°μ •ν–λ‹¤κ³  κ°€μ •ν•΄λ³΄μ. μ£Όλ¬Έμ€ ν¬μ¥ μ—†λ” λ‹¨μ μƒν’κ³Ό  μƒν’λ“¤μ΄ λ“¤μ–΄μλ” μƒμ λ° κΈ°νƒ€ μƒμλ“¤μ΄ ν¬ν•¨λ  μ μλ‹¤. μ΄λ¬ν• μ£Όλ¬Έμ μ΄ κ°€κ²©μ„ μ–΄λ–»κ² κ²°μ •ν•  κ²ƒμΈκ°€?

![ProductTree](https://refactoring.guru/images/patterns/diagrams/composite/problem-en-2x.png)

μ§μ ‘μ μΈ λ°©λ²•μ€ λ¨λ“  μƒμλ¥Ό κ°λ΄‰ν•΄μ„ λ¨λ“  μƒν’μ κ°€κ²©μ„ κ³„μ‚°ν•λ” λ°©λ²•μ΄λ‹¤. μ΄ λ°©λ²•μ„ ν„μ‹¤μ„Έκ³„μ—μ„λ” μ μ©ν•  μ μμ§€λ§, ν”„λ΅κ·Έλ¨μƒμ—μ„λ” λ°λ³µλ¬Έμ„ λ„λ”κ²ƒμ²λΌ κ°„λ‹¨ν•μ§€ μ•λ‹¤. κ³„μ‚°μ¤‘μΈ μƒν’ λ° μƒμμ ν΄λμ¤, μƒμμ μ¤‘μ²© μμ¤€κ³Ό κΈ°νƒ€ κ³¨μΉμ•„ν” μ„Έλ¶€μ‚¬ν•­μ„ λ―Έλ¦¬ μ•μ•„μ•Ό ν•λ‹¤. μ΄ λ¨λ“  κ²ƒμ΄ μ§μ ‘μ μΈ λ°©λ²•μ„ λ„λ¬΄ μ–΄λ µκ±°λ‚ μ‹¬μ§€μ–΄ λ¶κ°€λ¥ν•κ² λ§λ“ λ‹¤.

## Solution
Composite ν¨ν„΄μ€ μ΄ κ°€κ²© κ³„μ‚° ν•¨μκ°€ μ„ μ–Έλ μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ `μƒν’`κ³Ό `μƒμ` λ¥Ό κ³µν†µλ λ°©μ‹μΌλ΅ λ™μ‘ν•  μ μλ„λ΅ μ μ•ν•λ‹¤.

μ–΄λ–»κ² μ΄κ²ƒμ΄ κ°€λ¥ν• κΉ? μƒν’μ€ λ‹¨μν•κ² ν•΄λ‹Ή μƒν’μ κ°€κ²©μ„ λ°ν™ν•λ©΄ λλ‹¤. μƒμλ” μƒμμ— ν¬ν•¨λ κ° ν•­λ©μ„ μ‚΄ν΄λ³Έ ν›„ κ°€κ²©μ„ κ³„μ‚°ν•μ—¬ μƒμμ ν•©κ³„ κ°€κ²©μ„ λ°ν™ν•λ‹¤. μ΄λ“¤ μ¤‘ ν•λ‚κ°€ λ” μ‘μ€ μƒμμΌ κ²½μ°, ν•΄λ‹Ή μƒμμ— ν¬ν•¨λ κ° ν•­λ©μ„ μ‚΄ν΄λ΄ κ°€κ²©μ„ κ³„μ‚°ν•κ³  λ¨λ“  κ°λ³„ μƒν’μ κ°€κ²©μ΄ κ³„μ‚°λ λ•κΉμ§€ λ°λ³µν•λ‹¤. μƒμλ” ν¬μ¥λΉ„μ© λ“±μ„ κ°€κ²©μ— μ¶”κ°€ν•  μ μλ‹¤.

μ΄λ¬ν• μ ‘κ·Όμ κ°€μ¥ ν° ννƒμ€ νΈλ¦¬λ¥Ό κµ¬μ„±ν•λ” κµ¬μ²΄μ μΈ κ°μ²΄ ν΄λμ¤μ— λ€ν•΄ μ‹ κ²½ μ“Έ ν•„μ”κ°€ μ—†λ‹¤λ” κ²ƒμ΄λ‹¤. κ°μ²΄κ°€ λ‹¨μ μƒν’μΈμ§€ λ³µμ΅ν• μƒμμΈμ§€ μ• ν•„μ”κ°€ μ—†λ‹¤. κ·Έμ € λ¨λ“  ν•­λ©μ„ κ³µν†µ μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ λ‘κ°™μ΄ μ·¨κΈ‰ν•  μ μλ‹¤. ν•¨μλ¥Ό νΈμ¶ν•λ©΄ κ°μ²΄λ” μ”μ²­μ„ νΈλ¦¬ μ•„λλ΅ μ „λ‹¬ν•λ‹¤.


## Structure
```mermaid
classDiagram

class Component {
    <<interface>>
    + execute()
}

class Leaf {
    ...
    + execute()
}

class Composite {
    - children: Component[]
    + add(c: Component)
    + remove(c: Component)
    + getChildren(): Component[]
    + execute()
}

    Client --|> Component
    Component <|-- Leaf
    Component <|-- Composite

```

- **Component** μΈν„°νμ΄μ¤λ” νΈλ¦¬μ λ‹¨μ μ”μ†μ™€ λ³µμ΅ν• μ”μ† λ¨λ‘μ— κ³µν†µμ μΈ μ‘μ—…μ„ μ„¤λ…ν•λ‹¤
- **Leaf** λ” ν•μ„ μ”μ†κ°€ μ—†λ” νΈλ¦¬μ κΈ°λ³Έ μ”μ†μ΄λ‹¤
- **Container** λ” ν•μ„ μ”μ†κ°€ μλ” μ”μ†μ΄λ‹¤. Container λ” μμ‹μ κµ¬μ²΄μ μΈ ν΄λμ¤λ¥Ό μ•μ§€ λ»ν•λ‹¤. κµ¬μ„± μ”μ† μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄μ„λ§ ν•μ„ μ”μ†μ™€ μ‘λ™ν•κ² λλ‹¤. Container λ” μ”μ²­μ„ λ°›μΌλ©΄ μ‘μ—…μ„ ν•μ„ μ”μ†μ— μ„μ„ν•κ³  μ¤‘κ°„ κ²°κ³Όλ¥Ό μ²λ¦¬ν• λ‹¤μ μµμΆ… κ²°κ³Όλ¥Ό ν΄λΌμ΄μ–ΈνΈμ— λ°ν™ν•λ‹¤.
- `Client` λ” κµ¬μ„± μ”μ† μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ λ¨λ“  μ”μ†μ™€ μ‘λ™ν•λ‹¤. κ²°κ³Όμ μΌλ΅ ν΄λΌμ΄μ–ΈνΈλ” νΈλ¦¬μ λ‹¨μν•κ±°λ‚ λ³µμ΅ν• μ”μ†μ™€ μƒκ΄€μ—†μ΄ λ™μΌν• λ°©μ‹μΌλ΅ μ‘μ—…ν•  μ μλ‹¤.

## Applicability
**νΈλ¦¬μ™€ κ°™μ€ κµ¬μ΅°λ¥Ό κµ¬ν„ν•λ” κ²½μ° Composite ν¨ν„΄μ„ μ‚¬μ©ν•  μ μλ‹¤.**

Composite ν¨ν„΄μ€ λ‹¨μ Leafμ™€ λ³µν•© μ»¨ν…μ΄λ„λΌλ” λ‘ κΈ°λ³Έ νƒ€μ…μ„ κ³µν†µ μΈν„°νμ΄μ¤λ΅ μ κ³µν•λ‹¤. μ»¨ν…μ΄λ„λ” λ¦¬ν”„λ“¤κ³Ό λ‹¤λ¥Έ μ»¨ν…μ΄λ„λ“¤λ΅ κµ¬μ„±λ  μ μλ‹¤. μ΄λ¥Ό ν†µν•΄ λ‚λ¬΄μ™€ μ μ‚¬ν• μ¤‘μ²©λ μ¬κ·€ κµ¬μ΅°λ¥Ό κµ¬μ„±ν•  μ μλ‹¤.

## Pros & Cons
- π‘ λ³µμ΅ν• νΈλ¦¬ κµ¬μ΅°λ¥Ό λ³΄λ‹¤ νΈλ¦¬ν•κ² μ‘μ—…ν•  μ μλ‹¤.(λ‹¤ν•μ„±κ³Ό μ¬κ·€λ¥Ό ν™μ©)
- π‘ OCP: νΈλ¦¬ κ°μ²΄μ—μ„ κΈ°μ΅΄ μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³  μƒλ΅μ΄ μ”μ† νƒ€μ…μ„ λ„μ…ν•  μ μλ‹¤.
- π‘ κΈ°λ¥μ΄ λ„λ¬΄ λ‹¤λ¥Έ ν΄λμ¤λ“¤μ— κ³µν†µ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ” κ²ƒμ΄ μ–΄λ ¤μΈ μ μλ‹¤. νΉμ • μ‹λ‚λ¦¬μ¤μ—μ„λ”, κµ¬μ„± μ”μ† μΈν„°νμ΄μ¤λ¥Ό κ³Όλ„ν•κ² μΌλ°ν™”ν•μ—¬ μ΄ν•΄ν•κΈ° μ–΄λ µκ² λ§λ“ λ‹¤.

## Example
![Kotlin](https://img.shields.io/badge/kotlin-%230095D5.svg?style=for-the-badge&logo=kotlin&logoColor=white)
### Tree Price Example
- [Tree price](./example/kotlin/src/main/kotlin/Main.kt)
- [Box](./example/kotlin/src/main/kotlin/Box.kt), [Component](./example/kotlin/src/main/kotlin/Component.kt), [Product](./example/kotlin/src/main/kotlin/Product.kt)
## Reference
[Refactoring.guru](https://refactoring.guru/design-patterns/composite)