# Facade

...

## TL;DR

...

## Problem

시스템 안에 클라이언트와 여러 클래스로 구성된 서브시스템이 있다고 하자.
서브시스템은 외부에 기능을 제공하기 위해 필요한 클래스들을 공개하고, 클라이언트는 필요한 기능을 사용하기 위해 각 클래스에 접근한다.

클라이언트가 사용하고 싶은 기능이 개별 클래스의 기능이라면 직접 접근하면 되겠지만, 여러 클래스의 기능을 조합해 사용하는 것이 서브시스템의 일반적인 사용 방법일 수 있다.

예를 들어 클라이언트가 문장이 문법에 맞는지 파싱하고 싶고 문자열 파싱에 관한 서브시스템이 있다고 하자.
이 서브시스템에는 문자열을 토큰화하는 클래스, 토큰을 트리 구조로 만드는 클래스, 트리 구조가 문법에 맞는지 검사하는 클래스가 있다.
클라이언트는 문법 검사를 위해 각 클래스의 구현을 잘 알고있어야한다.
사용하는 측에서 서브시스템의 사용 방법을 잘 알고있어야하다보니 서브시스템의 구조가 변경되거나 breaking change가 발생하면 사용하는 측에서 구현을 바꿔야하는 문제가 발생한다.

## Solution

퍼사드 패턴은 서브시스템에 대해 통일된 인터페이스를 제공하여 클라이언트와 서브시스템을 분리한다.
서브시스템의 일반적인 사용 방법을 퍼사드를 통해 제공하면서 클라이언트는 개별 클래스에 대해 알지 않아도 기능을 사용할 수 있게 된다.

위의 예시 상황에서는 서브시스템의 각 클래스에 대해 클라이언트가 잘 알고있어야하므로 각 클래스에 대해 의존성이 생기고 서브시스템을 변경하기 쉽지 않았다.
서브시스템에 제공되는 인터페이스를 사용하면 사용자는 내부 구현에 대해 몰라도 사용할 수 있으므로 서브시스템의 구조가 변경된다고 해도 관계 없이 기능을 사용할 수 있게 된다.
서브시스템의 변경은 인터페이스까지만 전달되고 클라이언트까지는 전달되지 않아 변경에서 비교적 자유로워지게된다.

여기서 주의할 것은 퍼사드 패턴이 서브시스템을 완전히 가리는 것이 아니라는 점이다.
서브시스템에서 공개되었던 부분은 그대로 공개하여 사용할 수 있게 하고, 퍼사드 패턴은 서브시스템을 좀 더 편리하게 사용하기 위한 인터페이스를 제공할 뿐이다.

이런 구조는 일반적으로 사용되는 구조이므로 주변에서 쉽게 예시를 찾을 수 있다.
스마트폰의 설정을 바꿔야할 때를 예로 들어보자.
사용자는 특정 설정을 바꾸기 위해 스마트폰을 잠금해제하고 설정 어플리케이션에 들어간 다음 원하는 설정이 있는 메뉴에 들어가 설정을 바꿔야한다.
사용자는 설정 어플리케이션의 위치가 바뀌거나 OS가 업데이트되어 UI가 바뀌었을 경우 원하는 설정 메뉴가 어디에 있는지 알아봐야한다.
사용자가 원하는 것은 설정은 바꾸는 것이므로 음성비서에게 명령을 내릴 수 있을 것이다.
이 경우 사용자는 설정을 바꾸기 위한 구체적인 방법을 기억하지 않아도 되므로 스마트폰의 구성을 몰라도 기능을 사용할 수 있게 된다.
하지만 음성비서를 사용하지 않더라도 사용자는 설정 어플리케이션에 직접 들어가 설정을 바꿀 수도 있다.
여기서 음성비서가 퍼사드, 스마트폰의 설정이 서브시스템과 유사하다.

## Structure

...

## Pseudocode

```
class Client:
    function main:
        Facade facade = new Facade();
        ret = facade.doSomething(...);
        ...
        

class Facade:
    public function doSomething(...):
        ConcreteClassA().DoThis(...);
        ConcreteClassB().DoThat(...);
        ...

class ConcreteClassA:
    public function DoThis(...):
        ...

class ConcreteClassB:
    public function DoThat(...):
        ...
```

## Pros & Cons

### Pros

- 서브시스템과 서브시스템을 사용하는 측을 퍼사드를 경계로 분리할 수 있다.

### Cons

- 

## Examples

![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)
* [facade](/examples/Facade/facade.py)
